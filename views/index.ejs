<%- include header %>

<div class="container">

  <form class="" action="/posts/search" method="get">
    <input type="text" name="q" value="" placeholder="search post" class="form-control">
    <button type="submit" class="btn btn-primary btn-block">search</button>
  </form>

<div class="list-group">
  <% posts.forEach((post) => { %>
    <a href="/posts/<%= post._id %>" class="list-group-item list-group-item-action flex-column align-items-start">
      <div class="d-flex w-100 justify-content-between">
        <h3 class="mb-1"><%= post.title %></h3>
        <% if(post.auther){ %>
          <small><%= post.auther.name %></small>
        <% } %>
      </div>
      <p class="mb-1"><%= post.body %></p>
      <a href="/posts/<%= post._id %>/delete" class="btn btn-outline btn-sm">delete</a><a class="btn btn-outline btn-sm" href="/posts/<%= post._id %>/update">update</a>
    </a>
  <% }) %>
</div>
  <% if(pages !== undefined){ %>
<ul>

  <% pages.forEach(page => {%>
    <a href="?page=<%= page+1 %>" <% if(curpage == page+1){%>
        style="color: red; font-size: 20px"
    <%}%> ><%= page+1 %></a>
  <%})  %>

</ul>
<a href="?page=<%= curpage-1 %>" <% if(curpage == 1){%>
  style="display: none"
<%} %> class="btn btn-primary btn-block">prev page</a>
<a href="?page=<%= curpage+1 %>" <% if(curpage == pages.length){%>
  style="display: none"
<%} %> class="btn btn-primary btn-block">next page</a>
<%}%>


<a href="/posts">posts</a>
<a href="/users">users</a>
<a href="/users/logout">Logout</a>
<a href="/users/login">LogIn</a>
<a href="/tags">Tags</a>
<a href="/images">images</a>

<%- include form %>
</div>
<%- include footer %>
